name: Python package
on:
  push:
    branches: [ master ]
  pull_request:

jobs:
  build:
    strategy:
      matrix:
        os: [ ubuntu-latest, macos-latest, windows-latest ]
      fail-fast: false
    runs-on: ${{ matrix.os }}
    steps:
    - uses: actions/checkout@v2
    - run: |
        if [ $(uname) == "Darwin" ]; then
          grep -rl "upgrade" . | xargs sed -i "" "s/upgrade/U/g"
        else
          grep -rl "upgrade" . | xargs sed -i "s/upgrade/U/g"
        fi


#   create-issue:
#     needs: build
#     if: always() && needs.build.result == 'failure'
#     runs-on: ubuntu-latest
#     steps:
#     - uses: actions/checkout@v2
#     - uses: JasonEtco/create-an-issue@v2
#       name: Create issue if pytorch version tests failed
#       if: needs.build.result == 'failure'
#       with:
#         filename: .github/failed_schedule_issue_template.md
#       env:
#         GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
